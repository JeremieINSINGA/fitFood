{"version":3,"sources":["webpack:///./src/app/profile/profile.module.ts","webpack:///./src/app/profile/profile.page.html","webpack:///./src/app/profile/profile.page.scss","webpack:///./src/app/profile/profile.page.ts"],"names":[],"mappings":"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","file":"profile-profile-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"favorite\\\">\\n    <ion-title>Profil</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content color=\\\"light\\\" *ngIf=\\\"user\\\">\\n\\n  <ion-item color=\\\"light\\\" class=\\\"ion-padding-horizontal ion-padding-top\\\" (click)=\\\"editProfile('lastname')\\\">\\n    <ion-label>\\n      Nom\\n    </ion-label>\\n    <p class=\\\"font-300 my-0 ml-auto\\\">\\n      {{ user.lastname }}\\n    </p>\\n  </ion-item>\\n\\n  <ion-item color=\\\"light\\\" class=\\\"ion-padding-horizontal\\\"(click)=\\\"editProfile('firstname')\\\">\\n    <ion-label>\\n      Prénom\\n    </ion-label>\\n    <p class=\\\"font-300 my-0 ml-auto\\\">\\n      {{ user.firstname }}\\n    </p>\\n  </ion-item>\\n\\n  <ion-item color=\\\"light\\\" class=\\\"ion-padding-horizontal\\\" (click)=\\\"editProfile('email')\\\">\\n    <ion-label>\\n      Email\\n    </ion-label>\\n    <p class=\\\"font-300 my-0 ml-auto\\\">\\n      {{ user.email }}\\n    </p>\\n  </ion-item>\\n\\n  <ion-item color=\\\"light\\\" class=\\\"ion-padding-horizontal\\\" (click)=\\\"editProfile('phone')\\\">\\n    <ion-label>\\n      Téléphone\\n    </ion-label>\\n    <p class=\\\"font-300 my-0 ml-auto\\\">\\n      {{ user.phone }}\\n    </p>\\n  </ion-item>\\n\\n  <ion-item color=\\\"light\\\" class=\\\"ion-padding-horizontal\\\" (click)=\\\"editProfile('birth')\\\">\\n    <ion-label>\\n      Date de naissance\\n    </ion-label>\\n    <p class=\\\"font-300 my-0 ml-auto\\\">\\n      {{ user.birth | date : 'dd/MM/yyyy'}}\\n    </p>\\n  </ion-item>\\n\\n  <ion-item color=\\\"light\\\" class=\\\"ion-padding-horizontal\\\" (click)=\\\"editProfile('sex')\\\">\\n    <ion-label>\\n      Sexe\\n    </ion-label>\\n    <p class=\\\"font-300 my-0 ml-auto\\\">\\n      {{ user.sex }}\\n    </p>\\n  </ion-item>\\n\\n  <ion-item color=\\\"light\\\" class=\\\"ion-padding-horizontal\\\">\\n    <ion-label color=\\\"danger\\\" (click)=\\\"onSignOut()\\\">\\n        Déconnexion\\n    </ion-label>\\n  </ion-item>\\n\\n  <ion-item color=\\\"light\\\" class=\\\"ion-padding-horizontal\\\">\\n    <ion-label>\\n      Mentions légales et conditions générales\\n    </ion-label>\\n  </ion-item>\\n\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Byb2ZpbGUvcHJvZmlsZS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { UsersService } from 'src/app/services/users.service';\nimport { User } from 'src/app/models/User.model';\nimport { Subscription } from 'rxjs';\nimport * as firebase from 'firebase';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { AlertController, NavController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\nexport class ProfilePage implements OnInit, OnDestroy {\n\n  user: User;\n  userSubscription: Subscription;\n\n  currentUser;\n\n  // profileModalTitle: string;\n  // profileModalObject: string;\n\n  constructor(\n    private usersService: UsersService,\n    private authenticationService: AuthenticationService,\n    private alertCtrl : AlertController,\n    private navCtrl: NavController,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    firebase.auth().onAuthStateChanged(\n      (user) => {\n        if (user) {\n          this.initUser(user.uid);\n          this.currentUser = user;\n        } else {\n          console.log('déconnecté');\n        }\n      }\n    );\n  }\n\n  initUser(userId) {\n    this.userSubscription = this.usersService.userSuject.subscribe(\n      (user: User) => {\n        this.user = user;\n      }\n    );\n    this.usersService.getUser(userId);\n    this.usersService.emitUser();\n  }\n\n  async editProfile(title: string) {\n    console.log(title);\n    let paramToDisplay: string;\n    let paramToChange: string;\n    let inputParam;\n    switch (title) {\n      case 'lastname':\n        paramToDisplay = 'nom';\n        paramToChange = 'lastname';\n        inputParam = [\n          {\n            name: 'lastname',\n            type: 'text',\n            placeholder: 'Votre nom'\n          }\n        ];\n        break;\n      case 'firstname':\n        paramToDisplay = 'prénom';\n        paramToChange= 'firstname';\n        inputParam = [\n          {\n            name: 'firstname',\n            type: 'text',\n            placeholder: 'Votre prénom'\n          }\n        ];\n        break;\n      case 'email':\n        paramToDisplay = 'email';\n        paramToChange = 'email';\n        inputParam = [\n          {\n            name: 'email',\n            type: 'email',\n            placeholder: 'Votre email'\n          }\n        ];\n        break;\n      case 'phone':\n        paramToDisplay = 'téléphone';\n        paramToChange = 'phone';\n        inputParam = [\n          {\n            name: 'phone',\n            type: 'tel',\n            placeholder: 'Votre téléphone'\n          }\n        ];\n        break;\n      case 'birth':\n        paramToDisplay = 'date de naissance';\n        paramToChange = 'birth';\n        inputParam = [\n          {\n            name: 'birth',\n            type: 'date',\n          }\n        ];\n        break;\n      case 'sex':\n        paramToDisplay = 'genre';\n        paramToChange = 'sex';\n        inputParam = [\n          {\n            name: 'sex',\n            type: 'radio',\n            label: 'Homme',\n            value: 'Homme'\n          },\n          {\n            name: 'sex',\n            type: 'radio',\n            label: 'Femme',\n            value: 'Femme'\n          }\n        ];\n        break;\n    }\n    const alert = await this.alertCtrl.create({\n      header: 'Modifier votre ' + paramToDisplay + ' ?',\n      inputs: inputParam,\n      buttons: [\n        {\n          text: 'Annuler',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            console.log('Confirm Cancel');\n          }\n        }, {\n          text: 'Enregistrer',\n          handler: (data) => {\n            const userId = this.user.userId;\n            let userFirstname = this.user.firstname;\n            let userLastname = this.user.lastname;\n            let userEmail = this.user.email;\n            let userPhone = this.user.phone;\n            let userBirth = this.user.birth;\n            let userSex = this.user.sex;\n            switch (paramToChange) {\n              case 'firstname':\n                userFirstname = data[paramToChange];\n                break;\n              case 'lastname':\n                userLastname = data[paramToChange];\n                break;\n              case 'email':\n                userEmail = data[paramToChange];\n                break;\n              case 'phone':\n                userPhone = data[paramToChange];\n                break;\n              case 'birth':\n                userBirth = data[paramToChange];\n                break;\n              case 'sex':\n                userSex = data;\n                break;\n            }\n            const newUser = new User(userId, userFirstname, userLastname, userEmail, userPhone, userBirth, userSex);\n            this.usersService.updateUser(newUser, userId);\n            this.usersService.updateEmail(userEmail, this.currentUser).then(\n              () => {\n                console.log('Email updated');\n              },\n              (error) => {\n                this.errorAlert(error);\n              }\n            );\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  async errorAlert(message) {\n    const alert = await this.alertCtrl.create({\n      header: 'Error',\n      message: `${message}`,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  onSignOut() {\n    // this.navCtrl.navigateForward('/signin');\n    this.authenticationService.signOutUser();\n    this.router.navigate(['/signin']);\n  }\n\n\n  ngOnDestroy() {\n    this.userSubscription.unsubscribe();\n  }\n\n}\n"],"sourceRoot":""}